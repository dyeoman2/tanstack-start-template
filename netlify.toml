[build]
  command = "echo '🏗️ Starting build process...' && echo '🗄️ Setting up database schema...' && pnpm run db:push:prod && echo '✅ Database schema applied' && echo '🏗️ Building application...' && pnpm build && echo '🎉 Build completed successfully'"
  publish = "dist/client"

[build.environment]
  NODE_VERSION = "24"
  SECRETS_SCAN_OMIT_KEYS = "RESEND_EMAIL_SENDER,APP_NAME,BETTER_AUTH_URL,S3_REGION"

[template]
  full = true

[[template.environment]]
name = "APP_NAME"
required = true
default = "TanStack Start Template"
description = "Name of the application"

[[template.environment]]
name = "BETTER_AUTH_SECRET"
required = true
default = ""
description = "Signs JWTs for authentication. Run 'openssl rand -base64 32' in your terminal to generate"

[[template.environment]]
name = "BETTER_AUTH_URL"
required = true
default = "https://tanstack-start-template.netlify.app"
description = "Base URL used by Better Auth callbacks"

[[template.environment]]
name = "DB_ENCRYPTION_KEY"
required = true
default = ""
description = "Encrypts sensitive fields before database storage. Run 'openssl rand -base64 32' in your terminal to generate"

[[template.environment]]
name = "RESEND_API_KEY"
required = true
default = ""
description = "Resend API key for sending emails"

[[template.environment]]
name = "RESEND_EMAIL_SENDER"
required = true
default = "onboarding@resend.dev"
description = "Sender email address for sending emails"
